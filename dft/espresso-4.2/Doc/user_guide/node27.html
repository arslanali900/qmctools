<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>5.3 Nudged Elastic Band calculation</TITLE>
<META NAME="description" CONTENT="5.3 Nudged Elastic Band calculation">
<META NAME="keywords" CONTENT="user_guide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="user_guide.css">

<LINK REL="previous" HREF="node26.html">
<LINK REL="up" HREF="node24.html">
<LINK REL="next" HREF="node28.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html683"
  HREF="node28.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html679"
  HREF="node24.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html675"
  HREF="node26.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html681"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html684"
  HREF="node28.html">6 Phonon calculations</A>
<B> Up:</B> <A NAME="tex2html680"
  HREF="node24.html">5 Using PWscf</A>
<B> Previous:</B> <A NAME="tex2html676"
  HREF="node26.html">5.2 Optimization and dynamics</A>
 &nbsp; <B>  <A NAME="tex2html682"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00063000000000000000">
5.3 Nudged Elastic Band calculation</A>
</H2>
Specify <TT>calculation='neb'</TT> and add namelist &amp;IONS.

<P>
All options for a single SCF calculation apply, plus a few others. In the
namelist &amp;IONS the number of images used to discretize the elastic band
must be specified. All other variables have a default value. Coordinates
of the initial and final image of the elastic band have to be specified
in the ATOMIC_POSITIONS card. A detailed description of all input
variables is contained in files <TT>Doc/INPUT_PW.*</TT>. See Example 17.

<P>
A NEB calculation will produce a number of files in the current directory
(i.e. in the directory were the code is run) containing additional information
on the minimum-energy path. The files are organized as following
(where <TT>prefix</TT> is specified in the input file):
<DL>
<DT><STRONG><TT>prefix.dat</TT></STRONG></DT>
<DD>is a three-column file containig the position of each image on the reaction
coordinate (arb. units), its energy in eV relative to the energy of the first image
and the residual error for the image in eV/<I>a</I><SUB>0</SUB>
<tex2html_verbatim_mark>.
</DD>
<DT><STRONG><TT>prefix.int</TT></STRONG></DT>
<DD>contains an interpolation of the path energy profile that pass exactly through each
image; it is computed using both the image energies and their derivatives
</DD>
<DT><STRONG><TT>prefix.path</TT></STRONG></DT>
<DD>information used by Q<SMALL>UANTUM </SMALL>ESPRESSO 
to restart a path calculation, its format depends on the input
details and is undocumented
</DD>
<DT><STRONG><TT>prefix.axsf</TT></STRONG></DT>
<DD>atomic positions of all path images in the XCrySDen animation format:
to visualize it, use <TT>xcrysden -axsf prefix.axsf</TT>
</DD>
<DT><STRONG><TT>prefix.xyz</TT></STRONG></DT>
<DD>atomic positions of all path images in the generic xyz format, used by
many quantum-chemistry softwares
</DD>
<DT><STRONG><TT>prefix.crd</TT></STRONG></DT>
<DD>path information in the input format used by .x, suitable for a manual
restart of the calculation
</DD>
</DL>

<P>
"NEB calculation are a bit tricky in general and require extreme care to be
setup correctly. NEB also takes easily hunders of iteration to converge,
of course depending on the number of atoms and of images. Here is some
free advice:

<OL>
<LI>Don't use Climbing Image (CI) from the beginning. It makes convergence slower, 
especially if the special image changes during the convergence process (this 
may happen if <TT>CI_scheme='auto'</TT> and if it does it may mess up everything).
Converge your calculation, then restart from the last configuration with
CI option enabled (note that this will <EM>increase</EM> the barrier).
</LI>
<LI>Carefully choose the initial path. Remember that Q<SMALL>UANTUM </SMALL>ESPRESSO assumes continuity
between the first and the last image at the initial condition. In other 
words, periodic images are NOT used; you may have to manually translate
an atom by one or more unit cell base vectors in order to have a meaningful
initial path. You can visualize NEB input files with XCrySDen as animations,
take some time to check if any atoms overlap or get very close in the initial
path (you will have to add intermediate images, in this case).
</LI>
<LI>Try to start the NEB process with most atomic positions fixed, 
in order to converge the more "problematic" ones, before leaving
all atoms move.
</LI>
<LI>Especially for larger systems, you can start NEB with lower accuracy 
(less k-points, lower cutoff) and then increase it when it has
converged to refine your calculation.
</LI>
<LI>Use the Broyden algorithm instead of the default one: it is a bit more
fragile, but it removes the problem of "oscillations" in the calculated
activation energies. If these oscillations persist, and you cannot afford 
more images, focus to a smaller problem, decompose it into pieces.
</LI>
<LI>A gross estimate of the required number of iterations is
(number of images) * (number of atoms) * 3. Atoms that do not
move should not be counted. It may take half that many iterations, 
or twice as many, but more or less that's the order of magnitude, 
unless one starts from a very good or very bad initial guess.
</LI>
</OL>
(Courtesy of Lorenzo Paulatto)

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html683"
  HREF="node28.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html679"
  HREF="node24.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html675"
  HREF="node26.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html681"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html684"
  HREF="node28.html">6 Phonon calculations</A>
<B> Up:</B> <A NAME="tex2html680"
  HREF="node24.html">5 Using PWscf</A>
<B> Previous:</B> <A NAME="tex2html676"
  HREF="node26.html">5.2 Optimization and dynamics</A>
 &nbsp; <B>  <A NAME="tex2html682"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Paolo Giannozzi
2010-05-07
</ADDRESS>
</BODY>
</HTML>
